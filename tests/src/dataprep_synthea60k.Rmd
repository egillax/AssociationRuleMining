---
title: "Preparing dataset"
author: "Solon Ioannou"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(arules)
```

```{r}
#import data
df <- readRDS("../data/raw/synthea60k.rds")
str(df)
```

```{r}
#convert relevant variable to factor
cols <- c("ID", "CONDITION_CONCEPT_ID", "VISIT_OCCURRENCE_ID", "CONCEPT_NAME")
df[, cols] <- lapply(df[, cols], factor)
str(df)
summary(df)
```

```{r}
df <- select(df, c(ID, CONCEPT_NAME))
```

```{r}
trans <- as(df, "transactions")
```

```{r}
saveRDS(df, file = "../data/processed/synthea60k_man.rds")
saveRDS(trans, file = "../data/processed/synthea60k_trans.rds")
```


